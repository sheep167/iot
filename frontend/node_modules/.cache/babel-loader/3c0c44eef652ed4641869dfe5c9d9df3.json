{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\marcyiu\\\\PycharmProjects\\\\iot\\\\frontend\\\\my-app\\\\src\\\\Pages\\\\Device.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\nimport './Device.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Device = () => {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [order, setOrder] = useState({\n    name: \"asc\",\n    type: \"asc\",\n    _id: \"asc\"\n  });\n\n  const getDevices = () => {\n    const options = {\n      method: \"GET\",\n      url: \"http://localhost:5000/api/v1/user/all_devices\",\n      withCredentials: true\n    };\n    axios(options).then(r => setData(r.data.data));\n  };\n\n  useEffect(() => {\n    getDevices();\n    getLatestData();\n  }, []);\n\n  const sort = colName => {\n    if (order[colName] === \"dec\") {\n      const sortedData = [...data].sort((a, b) => a[colName].toLowerCase() > b[colName].toLowerCase() ? 1 : -1);\n      setData(sortedData);\n      setOrder({ ...order,\n        [colName]: \"asc\"\n      });\n    }\n\n    if (order[colName] === \"asc\") {\n      const sortedData = [...data].sort((a, b) => a[colName].toLowerCase() < b[colName].toLowerCase() ? 1 : -1);\n      setData(sortedData);\n      setOrder({ ...order,\n        [colName]: \"dec\"\n      });\n    }\n  };\n\n  const getLatestData = () => {\n    Promise.all(data.map(async d => {\n      const options = {\n        method: \"GET\",\n        url: `http://localhost:5000/api/v1/device/${d._id}/latest_telemetry`,\n        withCredentials: true\n      };\n      let r = await axios(options);\n      console.log(r.data);\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            onClick: () => sort(\"name\"),\n            children: [\"Device Name \", order.name === \"asc\" ? /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-solid fa-arrow-down\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 94\n            }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-solid fa-arrow-up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 134\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            onClick: () => sort(\"type\"),\n            children: [\"Device Type  \", order.type === \"asc\" ? /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-solid fa-arrow-down\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 95\n            }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-solid fa-arrow-up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 135\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            onClick: () => sort(\"_id\"),\n            children: [\"ID \", order._id === \"asc\" ? /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-solid fa-arrow-down\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 83\n            }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-solid fa-arrow-up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 123\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: data.map(d => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: d.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: d.type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: d._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this)]\n        }, d._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Device, \"FgleXC+bA9qfp9EGuFr7DgZNnGs=\");\n\n_c = Device;\n\nvar _c;\n\n$RefreshReg$(_c, \"Device\");","map":{"version":3,"sources":["C:/Users/marcyiu/PycharmProjects/iot/frontend/my-app/src/Pages/Device.js"],"names":["React","useEffect","useState","Cookies","axios","Device","data","setData","order","setOrder","name","type","_id","getDevices","options","method","url","withCredentials","then","r","getLatestData","sort","colName","sortedData","a","b","toLowerCase","Promise","all","map","d","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Cookies from 'js-cookie';\r\nimport axios from 'axios';\r\nimport './Device.css'\r\n\r\nexport const Device = () => {\r\n\r\n    const [data, setData] = useState([]);\r\n    const [order, setOrder] = useState({name: \"asc\", type: \"asc\", _id: \"asc\"})\r\n\r\n    const getDevices = () => {\r\n        const options = {\r\n            method: \"GET\",\r\n            url: \"http://localhost:5000/api/v1/user/all_devices\",\r\n            withCredentials: true\r\n        }\r\n        axios(options)\r\n        .then(r => setData(r.data.data));\r\n    }\r\n\r\n    useEffect(() => {getDevices(); getLatestData();}, []);\r\n\r\n    const sort = (colName) => {\r\n        if (order[colName] === \"dec\") {\r\n            const sortedData = [...data].sort((a, b) => \r\n                a[colName].toLowerCase() > b[colName].toLowerCase() ? 1 : -1\r\n            );\r\n            setData(sortedData);\r\n            setOrder({...order, [colName]: \"asc\"});\r\n        }\r\n        if (order[colName] === \"asc\") {\r\n            const sortedData = [...data].sort((a, b) => \r\n                a[colName].toLowerCase() < b[colName].toLowerCase() ? 1 : -1\r\n            );\r\n            setData(sortedData);\r\n            setOrder({...order, [colName]: \"dec\"});\r\n        }\r\n    }\r\n\r\n    const getLatestData = () => {\r\n        Promise.all(data.map(async (d) => {\r\n            const options = {\r\n                method: \"GET\",\r\n                url: `http://localhost:5000/api/v1/device/${d._id}/latest_telemetry`,\r\n                withCredentials: true\r\n            }\r\n            let r = await axios(options)\r\n            console.log(r.data);\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th onClick={() => sort(\"name\")}>Device Name {order.name === \"asc\" ? <i class=\"fa-solid fa-arrow-down\"></i>: <i class=\"fa-solid fa-arrow-up\"></i>}</th>\r\n                        <th onClick={() => sort(\"type\")}>Device Type  {order.type === \"asc\" ? <i class=\"fa-solid fa-arrow-down\"></i>: <i class=\"fa-solid fa-arrow-up\"></i>}</th>\r\n                        <th onClick={() => sort(\"_id\")}>ID {order._id === \"asc\" ? <i class=\"fa-solid fa-arrow-down\"></i>: <i class=\"fa-solid fa-arrow-up\"></i>}</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    { data.map((d) => (\r\n                        <tr key={d._id}>\r\n                            <td>{d.name}</td>\r\n                            <td>{d.type}</td>\r\n                            <td>{d._id}</td>\r\n                        </tr>\r\n                    )) }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    \r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}